<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 codex/add-header-logo-and-update-footer-text-izsg6v
    <title>
        <%= title || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –ö–æ–º–∏—Ç–µ—Ç–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω–æ–π —Å–ª—É–∂–±—ã –ú–ß–° –†–ö' %>
        | –ú–ß–° –†–ö
    </title>
    
    <!-- –ú–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è SEO -->
    <meta name="description" content="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –ö–æ–º–∏—Ç–µ—Ç–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω–æ–π —Å–ª—É–∂–±—ã –ú–ß–° –†–ö">

    <title><%= title || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞' %> | –ú–ß–° –†–ö</title>
    
    <!-- –ú–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è SEO -->
    <meta name="description" content="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –Ω–∞–¥–∑–æ—Ä–∞ –ö–ü–° –ú–ß–° –†–ö">
 main
    <meta name="keywords" content="–ú–ß–° –†–ö, –ø–æ–∂–∞—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É—á–µ—Ç –ø–æ–∂–∞—Ä–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∂—É—Ä–Ω–∞–ª—ã –∞—É–¥–∏—Ç–æ–≤">
    <meta name="author" content="–ú–ß–° –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω">
    
    <!-- Open Graph —Ç–µ–≥–∏ -->
    <meta property="og:title" content="<%= title || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –ö–æ–º–∏—Ç–µ—Ç–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω–æ–π —Å–ª—É–∂–±—ã –ú–ß–° –†–ö' %> | –ú–ß–° –†–ö">
    <meta property="og:description" content="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –ö–æ–º–∏—Ç–µ—Ç–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω–æ–π —Å–ª—É–∂–±—ã –ú–ß–° –†–ö">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ru_RU">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/css/theme.css">
    <% if (typeof additionalCSS !== 'undefined') { %>
        <% additionalCSS.forEach(function(css) { %>
            <link rel="stylesheet" href="<%= css %>">
        <% }); %>
    <% } %>
    
    <!-- –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞ -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* –£—Ç–∏–ª–∏—Ç—ã */
        .text-center { text-align: center; }
        .mb-0 { margin-bottom: 0; }
        .mt-2 { margin-top: 0.5rem; }
        .hidden { display: none; }
        
        /* –õ–æ–∞–¥–µ—Ä */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="portal-bg">
    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">üåô</span>
        <span id="theme-text">–¢–µ–º–Ω–∞—è</span>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        <%- body %>
    </main>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('theme-icon');
            const text = document.getElementById('theme-text');
            
            if (body.classList.contains('light-theme')) {
                body.classList.remove('light-theme');
                icon.textContent = 'üåô';
                text.textContent = '–¢–µ–º–Ω–∞—è';
                localStorage.setItem('theme', 'dark');
            } else {
                body.classList.add('light-theme');
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = '–°–≤–µ—Ç–ª–∞—è';
                localStorage.setItem('theme', 'light');
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç–µ–º—ã
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                document.getElementById('theme-icon').textContent = '‚òÄÔ∏è';
                document.getElementById('theme-text').textContent = '–°–≤–µ—Ç–ª–∞—è';
            }
        });
        
        // –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
        window.apiRequest = async function(method, url, data = null) {
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            };
            
            if (data) {
                options.body = JSON.stringify(data);
            }
            
            try {
                const response = await fetch(url, options);
                
                if (response.status === 401) {
                    window.location.href = '/auth/login';
                    return;
                }
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || `HTTP ${response.status}`);
                }
                
                return await response.json();
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        };
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        window.showNotification = function(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                transform: translateX(400px);
                transition: transform 0.3s ease;
                max-width: 300px;
                word-wrap: break-word;
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = '#10b981';
                    break;
                case 'error':
                    notification.style.background = '#dc2626';
                    break;
                case 'warning':
                    notification.style.background = '#f59e0b';
                    break;
                default:
                    notification.style.background = '#3b82f6';
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 4000);
        };
    </script>
    
    <% if (typeof additionalJS !== 'undefined') { %>
        <% additionalJS.forEach(function(js) { %>
            <script src="<%= js %>"></script>
        <% }); %>
    <% } %>
</body>
</html>